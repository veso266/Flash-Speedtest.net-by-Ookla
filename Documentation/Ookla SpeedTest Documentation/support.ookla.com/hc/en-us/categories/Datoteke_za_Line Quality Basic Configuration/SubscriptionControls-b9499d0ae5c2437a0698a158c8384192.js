webpackJsonp([8],{"2b76267a78c23d3086f3":function(t,e,a){var s=a("214b094fd19fc5e6e7f2"),r=a("eb119b637dc3749105c6");a("6ab499c92a41a79a86f3")("keys",function(){return function(t){return r(s(t))}})},"5a45bbf323059c3eb8f7":function(t,e,a){t.exports={default:a("9bdb9fecb3f64860fc98"),__esModule:!0}},"6ab499c92a41a79a86f3":function(t,e,a){var s=a("5d1068788c8158502382"),r=a("91d9e3da5180694da5dd"),n=a("a6619f2c70cf4f510f7c");t.exports=function(t,e){var a=(r.Object||{})[t]||Object[t],c={};c[t]=e(a),s(s.S+s.F*n(function(){a(1)}),"Object",c)}},"9bdb9fecb3f64860fc98":function(t,e,a){a("2b76267a78c23d3086f3"),t.exports=a("91d9e3da5180694da5dd").Object.keys},d5b30ff24ee69232f205:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function r(){var t=document.querySelectorAll("[data-helper='subscribe']");[].concat((0,c.default)(t)).forEach(function(t){return new o.default(t)})}Object.defineProperty(e,"__esModule",{value:!0});var n=a("fafba3d44052ea8dcdf4"),c=s(n);e.default=r;var i=a("e6a7744563ce25dbca92"),o=s(i)},e6a7744563ce25dbca92:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a("a1dbdaf952c6713f6eae"),n=s(r),c=a("db53d0530a402eb04daa"),i=s(c),o=a("5a45bbf323059c3eb8f7"),u=s(o),f=a("acab2ae8d55fd58113d8"),d=s(f),l=a("0bf817924258aa08734c"),b=s(l),h=a("12567f097106441c944d"),v=function(){function t(e){var a=this;(0,d.default)(this,t),this.control=e,this.state={isSubscribed:!1,counter:0},this.readAttributes(),this.removeAttributes(),this.control.addEventListener("click",function(t){return a.onClick(t)})}return(0,b.default)(t,[{key:"readAttributes",value:function(){this.hasCounter=this.control.hasAttribute("data-follower-count"),this.state={isSubscribed:"true"===this.control.getAttribute("aria-selected")},this.hasCounter&&(this.state.counter=parseInt(this.control.dataset.followerCount,10)),this.url=this.control.href+".json",this.states=JSON.parse(this.control.dataset.states)}},{key:"removeAttributes",value:function(){var t=this;(0,u.default)(this.control.dataset).forEach(function(e){"followerCount"!==e&&delete t.control.dataset[e]})}},{key:"getStateAttributes",value:function(){return this.states[this.state.isSubscribed?"subscribed":"unsubscribed"]}},{key:"onClick",value:function(){function t(t){return e.apply(this,arguments)}var e=(0,i.default)(n.default.mark(function t(e){var a,s=this;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),e.stopImmediatePropagation(),a=this.getStateAttributes(),this.toggleState(),t.t0=fetch,t.t1=this.url,t.t2=a.method,t.next=9,(0,h.fetchCSRFToken)();case 9:t.t3=t.sent,t.t4={"X-CSRF-Token":t.t3},t.t5={method:t.t2,credentials:"same-origin",headers:t.t4},t.t6=function(t){if(!t.ok)throw new Error},t.t7=function(){s.toggleState()},(0,t.t0)(t.t1,t.t5).then(t.t6).catch(t.t7),this.control.blur();case 16:case"end":return t.stop()}},t,this)}));return t}()},{key:"toggleState",value:function(){this.state.isSubscribed=!this.state.isSubscribed,this.hasCounter&&(this.state.counter+=this.state.isSubscribed?1:-1),this.render()}},{key:"render",value:function(){var t=this.getStateAttributes();this.control.className=t.class,this.control.textContent=t.label,this.control.setAttribute("aria-selected",this.state.isSubscribed),this.hasCounter&&(this.control.dataset.followerCount=this.state.counter)}}]),t}();e.default=v}});